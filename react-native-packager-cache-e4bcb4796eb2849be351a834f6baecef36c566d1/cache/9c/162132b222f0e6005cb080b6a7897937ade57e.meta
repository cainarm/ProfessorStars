["66f421451904c623ca8b7a3d0dd21579b7ea6700","eef2784bb017554c9f91fc49b906fa20524ed4e4",["./flattenStyle"],[129],{"version":3,"sources":["/home/cainarm/professorStars/node_modules/react-native-animatable/createAnimation.js"],"names":["createAnimation","compareNumbers","a","b","notNull","value","parsePosition","parsed","parseFloat","isNaN","cache","definition","cacheKey","JSON","stringify","positions","Object","keys","map","filter","sort","length","Error","compiled","easing","style","i","position","keyframe","from","to","forEach","key","inputRange","outputRange","push"],"mappings":";;;kBAyBwBA,e;;AAzBxB;;;;AAEA,SAASC,cAAT,CAAwBC,CAAxB,EAA2BC,CAA3B,EAA8B;AAC5B,SAAOD,IAAIC,CAAX;AACD;;AAED,SAASC,OAAT,CAAiBC,KAAjB,EAAwB;AACtB,SAAOA,UAAU,IAAjB;AACD;;AAED,SAASC,aAAT,CAAuBD,KAAvB,EAA8B;AAC5B,MAAIA,UAAU,MAAd,EAAsB;AACpB,WAAO,CAAP;AACD,GAFD,MAEO,IAAIA,UAAU,IAAd,EAAoB;AACzB,WAAO,CAAP;AACD;AACD,MAAME,SAASC,WAAWH,KAAX,EAAkB,EAAlB,CAAf;AACA,MAAII,MAAMF,MAAN,KAAiBA,SAAS,CAA1B,IAA+BA,SAAS,CAA5C,EAA+C;AAC7C,WAAO,IAAP;AACD;AACD,SAAOA,MAAP;AACD;;AAED,IAAMG,QAAQ,EAAd;;AAEe,SAASV,eAAT,CAAyBW,UAAzB,EAAqC;AAClD,MAAMC,WAAWC,KAAKC,SAAL,CAAeH,UAAf,CAAjB;AACA,MAAID,MAAME,QAAN,CAAJ,EAAqB;AACnB,WAAOF,MAAME,QAAN,CAAP;AACD;;AAED,MAAMG,YAAYC,OAAOC,IAAP,CAAYN,UAAZ,EAAwBO,GAAxB,CAA4BZ,aAA5B,EAA2Ca,MAA3C,CAAkDf,OAAlD,CAAlB;AACAW,YAAUK,IAAV,CAAenB,cAAf;;AAEA,MAAIc,UAAUM,MAAV,GAAmB,CAAvB,EAA0B;AACxB,UAAM,IAAIC,KAAJ,CAAU,sDAAV,CAAN;AACD;;AAED,MAAMC,WAAW,EAAjB;AACA,MAAIZ,WAAWa,MAAf,EAAuB;AACrBD,aAASC,MAAT,GAAkBb,WAAWa,MAA7B;AACD;AACD,MAAIb,WAAWc,KAAf,EAAsB;AACpBF,aAASE,KAAT,GAAiBd,WAAWc,KAA5B;AACD;;AAnBiD,6BAqBzCC,CArByC;AAsBhD,QAAMC,WAAWZ,UAAUW,CAAV,CAAjB;AACA,QAAIE,WAAWjB,WAAWgB,QAAX,CAAf;AACA,QAAI,CAACC,QAAL,EAAe;AACb,UAAID,aAAa,CAAjB,EAAoB;AAClBC,mBAAWjB,WAAWkB,IAAtB;AACD,OAFD,MAEO,IAAIF,aAAa,CAAjB,EAAoB;AACzBC,mBAAWjB,WAAWmB,EAAtB;AACD;AACF;AACD,QAAI,CAACF,QAAL,EAAe;AACb,YAAM,IAAIN,KAAJ,CAAU,oDAAV,CAAN;AACD;;AAEDM,eAAW,4BAAaA,QAAb,CAAX;AACAZ,WAAOC,IAAP,CAAYW,QAAZ,EAAsBG,OAAtB,CAA8B,eAAO;AACnC,UAAI,EAAEC,OAAOT,QAAT,CAAJ,EAAwB;AACtBA,iBAASS,GAAT,IAAgB;AACdC,sBAAY,EADE;AAEdC,uBAAa;AAFC,SAAhB;AAID;AACDX,eAASS,GAAT,EAAcC,UAAd,CAAyBE,IAAzB,CAA8BR,QAA9B;AACAJ,eAASS,GAAT,EAAcE,WAAd,CAA0BC,IAA1B,CAA+BP,SAASI,GAAT,CAA/B;AACD,KATD;AApCgD;;AAqBlD,OAAK,IAAIN,IAAI,CAAb,EAAgBA,IAAIX,UAAUM,MAA9B,EAAsCK,KAAK,CAA3C,EAA8C;AAAA,UAArCA,CAAqC;AAyB7C;;AAEDhB,QAAME,QAAN,IAAkBW,QAAlB;;AAEA,SAAOA,QAAP;AACD","sourcesContent":["import flattenStyle from './flattenStyle';\n\nfunction compareNumbers(a, b) {\n  return a - b;\n}\n\nfunction notNull(value) {\n  return value !== null;\n}\n\nfunction parsePosition(value) {\n  if (value === 'from') {\n    return 0;\n  } else if (value === 'to') {\n    return 1;\n  }\n  const parsed = parseFloat(value, 10);\n  if (isNaN(parsed) || parsed < 0 || parsed > 1) {\n    return null;\n  }\n  return parsed;\n}\n\nconst cache = {};\n\nexport default function createAnimation(definition) {\n  const cacheKey = JSON.stringify(definition);\n  if (cache[cacheKey]) {\n    return cache[cacheKey];\n  }\n\n  const positions = Object.keys(definition).map(parsePosition).filter(notNull);\n  positions.sort(compareNumbers);\n\n  if (positions.length < 2) {\n    throw new Error('Animation definitions must have at least two values.');\n  }\n\n  const compiled = {};\n  if (definition.easing) {\n    compiled.easing = definition.easing;\n  }\n  if (definition.style) {\n    compiled.style = definition.style;\n  }\n\n  for (let i = 0; i < positions.length; i += 1) {\n    const position = positions[i];\n    let keyframe = definition[position];\n    if (!keyframe) {\n      if (position === 0) {\n        keyframe = definition.from;\n      } else if (position === 1) {\n        keyframe = definition.to;\n      }\n    }\n    if (!keyframe) {\n      throw new Error('Missing animation keyframe, this should not happen');\n    }\n\n    keyframe = flattenStyle(keyframe);\n    Object.keys(keyframe).forEach(key => {\n      if (!(key in compiled)) {\n        compiled[key] = {\n          inputRange: [],\n          outputRange: [],\n        };\n      }\n      compiled[key].inputRange.push(position);\n      compiled[key].outputRange.push(keyframe[key]);\n    });\n  }\n\n  cache[cacheKey] = compiled;\n\n  return compiled;\n}\n"]}]